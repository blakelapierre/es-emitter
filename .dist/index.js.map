{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["module.exports = () => {\n  return listenerInterceptor => {\n    const events = {};\n\n    return {\n      emit: (...args) => emit(events, ...args),\n      on: (...args) => on(events, listenerInterceptor, ...args),\n      off: (...args) => off(events, ...args)\n    };\n  };\n\n  function emit(events, event) {\n    const listeners = events[event] || [],\n        args = Array.prototype.slice.call(arguments, 2);\n\n    for (let i = 0; i < listeners.length; i++) {\n      listeners[i].apply(null, args);\n    }\n  }\n\n  function on(events, listenerInterceptor, event, listener) {\n    if (typeof event == 'object') {\n      const unregister = () => _.each(unregister, fn => fn());\n      return _.transform(event, (result, listener, eventName) => {\n        result[eventName] = on(events, listenerInterceptor, eventName, listener);\n      }, unregister);\n    }\n\n    if (listenerInterceptor) {\n      const ret = listenerInterceptor.attemptIntercept(event, listener);\n      if (ret) return ret;\n    }\n\n    events[event] = events[event] || [];\n    events[event].push(listener);\n\n    return () => off(events, event, listener);\n  }\n\n  function off(events, event, listener) {\n    if (typeof event == 'object') {\n      for (let eventName in event) off(events, eventName, event[eventName]);\n      return;\n    }\n\n    const listeners = events[event];\n    if (listeners && listeners.length > 0) {\n      removeListener(listeners, listener);\n      if (listeners.length === 0) delete events[event];\n    }\n\n    function removeListener(listeners, listener) {\n      for (let i = listeners.length - 1; i >= 0; i--) {\n        if (listeners[i] === listener) {\n          listeners.splice(i, 1);\n        }\n      }\n      return listeners;\n    }\n  }\n};"],"sourceRoot":"/source/"}